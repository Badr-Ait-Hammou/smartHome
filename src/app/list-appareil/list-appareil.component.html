
<div class="card  m-3 p-2">
  <div class="grid grid-cols-2 flex justify-between gap-2 p-2 bg-gray-100 mb-3 -mt-3">
    <div class="text-end">
      <button pButton label="Save Appareil" class="p-button-primary mx-0.5 p-1 text-sm gap-2" (click)="openSaveDialog()"></button>
    </div>
    <div class="text-start">
      <button pButton label="Switch all on" class="p-button-success mx-0.5 p-1 text-sm gap-2" (click)="switchOnAllAppareils()"></button>
      <button pButton label="Switch all off" class="p-button-danger mx-0.5 p-1 text-sm gap-2" (click)="switchOffAllAppareils()"></button>
    </div>
  </div>


  <div class="grid grid-cols-3 gap-3">
    <div *ngFor="let appareil of appareils" class=" shadow-2 p-3 h-full flex flex-column  border-1 border-round   align-items-center  ">
         <img [src]="appareil.photo" alt="{{ appareil.label }}" class=" object-cover h-48 w-96"/>
      <div class=" flex flex-wrap justify-between gap-5 text-center">
        <p-tag severity="success"  class="mt-2">name : {{appareil.label}} </p-tag>
        <p-tag severity="success"  class="mt-2">status : {{appareil.state}} </p-tag>
        <p-inputSwitch [(ngModel)]="appareil.state" (onChange)="updateAppareil(appareil)"></p-inputSwitch>

        <!--      <p-inputSwitch [(ngModel)]="appareilStatus" class="mt-2" ></p-inputSwitch>-->
      </div>
      <div class="flex align-items-center gap-2 mt-1">
        <p-tag severity="success"  class="mt-2">desc : {{appareil.description}} </p-tag>
        <button pButton label="Delete Appareil" class="p-button-danger mx-0.5 p-1 text-sm" (click)="deleteAppareil(appareil.id) "></button>

      </div>
    </div>
</div>
</div>


<p-dialog header="Save Appareil" [(visible)]="displaySaveDialog" [modal]="true" [responsive]="true">
  <div class="p-fluid">
    <div class="p-field">
      <label for="label">Label</label>
      <input id="label" pInputText [(ngModel)]="newAppareil.label" />
    </div>
    <div class="p-field">
      <label for="label">description</label>
      <input id="description" pInputText [(ngModel)]="newAppareil.description" />
    </div>
    <div class="p-field">
      <label >State</label>
      <p-inputSwitch [(ngModel)]="newAppareil.state"></p-inputSwitch>
    </div>
    <div class="p-field">
      <label for="photo">Photo</label>
      <input id="photo" type="file" (change)="onFileChange($event)" />
    </div>
    <div class="p-field">
      <label for="categorie">Category</label>
      <select id="categorie" [(ngModel)]="newAppareil.categorie && newAppareil.categorie.id">
        <option *ngFor="let category of categories" [value]="category.id">{{ category.label }}</option>
      </select>
      <p-dropdown [options]="categories" [(ngModel)]="newAppareil.categorie && newAppareil.categorie.id" optionLabel="label" [showClear]="true" placeholder="Select a Category"></p-dropdown>
    </div>
  </div>

  <div class="p-dialog-footer">
    <button pButton label="Save" class="p-button-success" (click)="saveAppareil()"></button>
    <button pButton label="Cancel" class="p-button-secondary" (click)="displaySaveDialog = false"></button>
  </div>
</p-dialog>
